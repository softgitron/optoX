{
    // See https://go.microsoft.com/fwlink/?LinkId=733558
    // for the documentation about the tasks.json format
    "version": "2.0.0",
    "tasks": [
        {
            "label": "Destroy redirects",
            "type": "shell",
            "command": [
                "kill -9 $(pidof kubectl)",
                "; kill -9 $(pidof build.sh)",
                "; exit 0"
            ]
        },
        {
            "label": "Build gateway",
            "type": "shell",
            "command": ["${workspaceFolder}/scripts/build.sh gateway"]
        },
        {
            "label": "Start gateway debug",
            "dependsOn": [
                "Destroy redirects"
            ],
            "type": "shell",
            "command": [
                "${workspaceFolder}/scripts/debug.sh gateway ${config:kubernetesNamespace} ${config:redeployWait}"
            ]
        },
        {
            "label": "Stop gateway debug",
            "dependsOn": [
                "Destroy redirects",
                "Build gateway"
            ],
            "type": "shell",
            "command": ["kubectl -n ${config:kubernetesNamespace} rollout restart deployment/gateway"]
        },
        {
            "label": "Build mainbackend",
            "type": "shell",
            "command": ["${workspaceFolder}/scripts/build.sh mainbackend"]
        },
        {
            "label": "Start mainbackend debug",
            "dependsOn": [
                "Destroy redirects"
            ],
            "type": "shell",
            "command": [
                "${workspaceFolder}/scripts/debug.sh mainbackend ${config:kubernetesNamespace} ${config:redeployWait}"
            ]
        },
        {
            "label": "Stop mainbackend debug",
            "dependsOn": [
                "Destroy redirects",
                "Build mainbackend"
            ],
            "type": "shell",
            "command": ["kubectl -n ${config:kubernetesNamespace} rollout restart deployment/mainbackend"]
        },
        {
            "label": "Build mediator",
            "type": "shell",
            "command": ["${workspaceFolder}/scripts/build.sh mediator"]
        },
        {
            "label": "Start mediator debug",
            "dependsOn": [
                "Destroy redirects"
            ],
            "type": "shell",
            "command": [
                "${workspaceFolder}/scripts/debug.sh mediator ${config:kubernetesNamespace} ${config:redeployWait}"
            ]
        },
        {
            "label": "Stop mediator debug",
            "dependsOn": [
                "Destroy redirects",
                "Build mediator"
            ],
            "type": "shell",
            "command": ["kubectl -n ${config:kubernetesNamespace} rollout restart deployment/mediator"]
        },
        {
            "label": "Build syncbackend",
            "type": "shell",
            "command": ["${workspaceFolder}/scripts/build.sh syncbackend"]
        },
        {
            "label": "Start syncbackend debug",
            "dependsOn": [
                "Destroy redirects"
            ],
            "type": "shell",
            "command": [
                "${workspaceFolder}/scripts/debug.sh syncbackend ${config:kubernetesNamespace} ${config:redeployWait}"
            ]
        },
        {
            "label": "Stop syncbackend debug",
            "dependsOn": [
                "Destroy redirects",
                "Build syncbackend"
            ],
            "type": "shell",
            "command": ["kubectl -n ${config:kubernetesNamespace} rollout restart deployment/syncbackend"]
        },
        {
            "label": "Build and reinstall",
            "type": "shell",
            "command": ["${workspaceFolder}/scripts/install.sh reinstall"],
            "problemMatcher": []
        }
    ]
}